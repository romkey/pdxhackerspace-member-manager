<div class="mb-4">
  <%= link_to "&larr; Back to PayPal payments".html_safe, paypal_payments_path, class: "text-decoration-none" %>
</div>

<div class="card shadow-sm border-0">
  <div class="card-body">
    <h1 class="h4 mb-3">Transaction <%= @payment.paypal_id %></h1>

    <dl class="row mb-0">
      <dt class="col-sm-3 text-secondary">Status</dt>
      <dd class="col-sm-9"><span class="badge text-bg-secondary"><%= @payment.status.presence || "Unknown" %></span></dd>

      <dt class="col-sm-3 text-secondary">Amount</dt>
      <dd class="col-sm-9"><%= @payment.amount_with_currency || "—" %></dd>

      <dt class="col-sm-3 text-secondary">Transaction time</dt>
      <dd class="col-sm-9"><%= @payment.transaction_time ? l(@payment.transaction_time, format: :long) : "Unknown" %></dd>

      <dt class="col-sm-3 text-secondary">Type</dt>
      <dd class="col-sm-9"><%= @payment.transaction_type.presence || "—" %></dd>

      <dt class="col-sm-3 text-secondary">Payer</dt>
      <dd class="col-sm-9">
        <% if @payment.payer_name.present? %>
          <div><%= @payment.payer_name %></div>
        <% end %>
        <% if @payment.payer_email.present? %>
          <div><%= mail_to @payment.payer_email %></div>
        <% end %>
        <% if @payment.payer_id.present? %>
          <div class="text-muted small">Payer ID: <%= @payment.payer_id %></div>
        <% end %>
        <% if @payment.payer_name.blank? && @payment.payer_email.blank? %>
          <span class="text-muted fst-italic">Not provided</span>
        <% end %>
      </dd>

      <dt class="col-sm-3 text-secondary">Last synced</dt>
      <dd class="col-sm-9"><%= @payment.last_synced_at ? l(@payment.last_synced_at, format: :long) : "Unknown" %></dd>

      <dt class="col-sm-3 text-secondary">Raw data</dt>
      <dd class="col-sm-9">
        <pre class="bg-light rounded p-3"><code><%= JSON.pretty_generate(@payment.raw_attributes) %></code></pre>
      </dd>
    </dl>
  </div>
</div>

