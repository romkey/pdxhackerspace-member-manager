<%= turbo_stream.replace "unmatched-recharge-frame" do %>
  <%= turbo_frame_tag "unmatched-recharge-frame", data: { turbo_action: "advance" } do %>
    <div class="card shadow-sm border-0">
    <div class="card-header bg-body-tertiary">
      <h2 class="h5 mb-0">Unmatched Recharge Payments (<%= @unmatched_recharge_payments_count %>)</h2>
    </div>
    <div class="card-body">
      <% if @unmatched_recharge_payments.any? %>
        <p class="text-muted small mb-3">Payments that don't have a matching User record by Recharge customer ID</p>
        <%= render partial: 'reports/recharge_payments_table', locals: { payments: @unmatched_recharge_payments } %>
        <% if @unmatched_recharge_payments_count > 20 %>
          <div class="mt-3 text-center">
            <%= link_to "View all #{@unmatched_recharge_payments_count} payments", 
                reports_view_all_path('unmatched-recharge'), 
                class: "btn btn-outline-primary" %>
          </div>
        <% end %>
      <% else %>
        <p class="text-muted mb-0">All Recharge payments have matching User records.</p>
      <% end %>
    </div>
  </div>
  <% end %>
<% end %>


