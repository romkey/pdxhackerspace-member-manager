<div class="table-responsive">
  <table class="table table-sm align-middle mb-0">
    <thead class="bg-body-tertiary">
      <tr>
        <th scope="col">Payment ID</th>
        <th scope="col">Customer ID</th>
        <th scope="col">Customer Name</th>
        <th scope="col">Customer Email</th>
        <th scope="col">Processed</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% payments.each do |unmatched| %>
        <tr>
          <td>
            <strong><%= link_to unmatched[:payment].recharge_id, recharge_payment_path(unmatched[:payment]), class: "text-decoration-none" %></strong>
          </td>
          <td><%= unmatched[:customer_id].presence || "—" %></td>
          <td><%= unmatched[:name].presence || "—" %></td>
          <td>
            <% if unmatched[:email].present? %>
              <%= mail_to unmatched[:email] %>
            <% else %>
              —
            <% end %>
          </td>
          <td>
            <%= unmatched[:payment].processed_at ? l(unmatched[:payment].processed_at, format: :long) : "n/a" %>
          </td>
          <td>
            <% if unmatched[:customer_id].present? %>
              <button type="button" class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#linkRechargeUserModal_<%= unmatched[:payment].id %>">
                Link User
              </button>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

