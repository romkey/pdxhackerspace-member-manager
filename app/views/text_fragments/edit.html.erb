<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h1 class="h3 mb-1">Edit Text Fragment</h1>
    <p class="text-muted mb-0">Key: <code><%= @text_fragment.key %></code></p>
  </div>
  <div class="d-flex gap-2">
    <%= link_to "View", text_fragment_path(@text_fragment), class: "btn btn-outline-info" %>
    <%= link_to "Back to Text Fragments", text_fragments_path, class: "btn btn-outline-secondary" %>
  </div>
</div>

<div class="card shadow-sm border-0">
  <div class="card-body">
    <%= form_with model: @text_fragment, local: true do |form| %>
      <% if @text_fragment.errors.any? %>
        <div class="alert alert-danger">
          <ul class="mb-0">
            <% @text_fragment.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="mb-3">
        <%= form.label :title, class: "form-label fw-semibold" %>
        <%= form.text_field :title, class: "form-control" %>
      </div>

      <div class="mb-4" data-controller="rich-editor" data-rich-editor-variables-value="[]">
        <%= form.label :content, "Content", class: "form-label fw-semibold" %>
        <p class="text-muted small mb-2">Use the visual editor below or click the code button <code>&lt;/&gt;</code> to edit raw HTML.</p>
        <%= form.text_area :content, class: "form-control", rows: 15, data: { rich_editor_target: "editor" } %>
      </div>

      <div class="d-flex gap-2">
        <%= form.submit "Save Changes", class: "btn btn-primary" %>
        <%= link_to "Cancel", text_fragments_path, class: "btn btn-outline-secondary" %>
      </div>
    <% end %>
  </div>
</div>
